# index.html

```html
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Refei√ß√£o Solid√°ria</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <a class="skip-link" href="#conteudo">Pular para o conte√∫do</a>

  <header class="topbar" role="banner">
    <div class="container">
      <div class="brand" aria-label="Refei√ß√£o Solid√°ria">
        <span class="logo" aria-hidden="true">üç≤</span>
        <strong>Refei√ß√£o Solid√°ria</strong>
      </div>
      <nav class="nav" role="navigation" aria-label="Principal">
        <button class="nav-link" data-goto="#hero" id="btnInicio">In√≠cio</button>
        <button class="nav-link" data-goto="#doar">Doar</button>
        <button class="nav-link" data-goto="#buscar">Buscar</button>
        <button class="nav-link" data-goto="#chat">Chat</button>
        <button class="nav-link" data-goto="#ranking">Ranking</button>
        <button class="nav-link" data-goto="#planos">Planos</button>
      </nav>
      <div class="actions">
        <div class="a11y-group" role="group" aria-label="Acessibilidade">
          <button id="btnA11y" class="btn secondary" title="Abrir painel de acessibilidade" aria-expanded="false" aria-controls="painelA11y">Acessibilidade</button>
        </div>
        <button id="btnEntrar" class="btn ghost">Entrar</button>
        <button id="btnAssinarHeader" class="btn primary">Assinar</button>
      </div>
    </div>
  </header>

  <aside id="painelA11y" class="a11y-panel" aria-hidden="true">
    <div class="container">
      <h2 class="h4">Acessibilidade</h2>
      <div class="a11y-controls">
        <button class="btn small" id="toggleContraste">Alto contraste</button>
        <button class="btn small" id="toggleFonte">Aumentar fonte</button>
        <button class="btn small" id="toggleDislexia">Fonte leg√≠vel</button>
        <button class="btn small" id="toggleAnimacoes">Reduzir anima√ß√µes</button>
        <button class="btn small" id="resetA11y">Redefinir</button>
      </div>
      <p class="muted">Suas prefer√™ncias ficam salvas neste navegador.</p>
    </div>
  </aside>

  <main id="conteudo">
    <section id="hero" class="hero" aria-labelledby="ttlHero">
      <div class="container grid2">
        <div>
          <h1 id="ttlHero">Conecte doa√ß√µes de alimentos a quem mais precisa</h1>
          <p class="lead">Neg√≥cios evitam desperd√≠cio, pessoas e ONGs recebem refei√ß√µes. Tudo em tempo real.</p>
          <div class="cta">
            <a class="btn primary" href="#doar">Quero Doar</a>
            <a class="btn secondary" href="#buscar">Quero Receber</a>
          </div>
          <ul class="bullets" aria-label="Benef√≠cios">
            <li>‚ôªÔ∏è Menos desperd√≠cio</li>
            <li>ü§ù Impacto social real</li>
            <li>üèÖ Selo de empresa solid√°ria</li>
          </ul>
        </div>
        <div class="card stats" aria-label="Impacto em n√∫meros">
          <div class="stat"><span id="countDoacoes">0</span><small>doa√ß√µes</small></div>
          <div class="stat"><span id="countRefeicoes">0</span><small>refei√ß√µes</small></div>
          <div class="stat"><span id="countEstabelecimentos">0</span><small>estabelecimentos</small></div>
        </div>
      </div>
    </section>

    <section id="doar" class="section" aria-labelledby="ttlDoar">
      <div class="container">
        <h2 id="ttlDoar">Sou estabelecimento ‚Äî registrar doa√ß√£o</h2>
        <form id="formDoacao" class="card form" aria-describedby="dicaDoacao">
          <div class="grid3">
            <label>Tipo de alimento
              <input name="tipo" required placeholder="Ex.: P√£es, Marmitas, Frutas" />
            </label>
            <label>Quantidade
              <input name="quantidade" type="number" required min="1" placeholder="Ex.: 10" />
            </label>
            <label>Validade (hor√°rio limite)
              <input name="validade" type="time" required />
            </label>
            <label>Janela de retirada
              <input name="janela" required placeholder="Ex.: 14:00‚Äì16:00" />
            </label>
            <label>Endere√ßo
              <input name="endereco" required placeholder="Rua, n√∫mero, bairro, cidade" />
            </label>
            <label>Contato
              <input name="contato" type="tel" placeholder="(xx) xxxxx-xxxx" />
            </label>
          </div>
          <div class="form-actions">
            <button class="btn primary" type="submit">Publicar doa√ß√£o</button>
            <span class="hint" id="dicaDoacao">Dica: descreva bem o alimento para agilizar a retirada.</span>
          </div>
        </form>
        <div class="card" aria-live="polite" id="statusDoar" aria-atomic="true"></div>
      </div>
    </section>

    <section id="buscar" class="section" aria-labelledby="ttlBuscar">
      <div class="container">
        <h2 id="ttlBuscar">Sou ONG/benefici√°rio ‚Äî encontrar doa√ß√µes</h2>
        <div class="filters">
          <input id="filtroTexto" placeholder="Buscar por alimento, bairro, cidade..." aria-label="Filtro de busca" />
          <button class="btn" id="btnLocalizar">Usar minha localiza√ß√£o</button>
          <span class="muted" id="locStatus" aria-live="polite"></span>
        </div>
        <div class="grid2">
          <div class="map card" role="img" aria-label="Mapa ilustrativo de doa√ß√µes">
            <canvas id="miniMapa" width="500" height="320" aria-hidden="true"></canvas>
          </div>
          <div>
            <ul id="listaDoacoes" class="list" aria-label="Lista de doa√ß√µes dispon√≠veis"></ul>
          </div>
        </div>
      </div>
    </section>

    <section id="chat" class="section" aria-labelledby="ttlChat">
      <div class="container">
        <h2 id="ttlChat">Chat simples doador ‚Üî receptor</h2>
        <div class="grid2">
          <div class="card">
            <label>Escolha a conversa
              <select id="selConversa" aria-label="Selecionar conversa"></select>
            </label>
            <div id="chatJanela" class="chat" aria-live="polite"></div>
            <form id="formChat" class="chat-input" autocomplete="off">
              <input id="chatMsg" placeholder="Digite sua mensagem" required />
              <button class="btn primary" type="submit">Enviar</button>
            </form>
          </div>
          <div class="card">
            <h3 class="h4">Como funciona</h3>
            <ol class="mini">
              <li>Escolha a doa√ß√£o e clique em <em>Reservar</em>.</li>
              <li>Uma conversa √© criada entre voc√™ e o estabelecimento.</li>
              <li>Combine detalhes da retirada pelo chat.</li>
            </ol>
            <p class="muted">Conte√∫do simulado localmente ‚Äî sem servidor.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="historico" class="section" aria-labelledby="ttlHistorico">
      <div class="container">
        <h2 id="ttlHistorico">Hist√≥rico</h2>
        <div class="grid2">
          <div>
            <h3 class="h5">Minhas reservas</h3>
            <ul id="listaReservas" class="list"></ul>
          </div>
          <div>
            <h3 class="h5">Doa√ß√µes publicadas</h3>
            <ul id="listaPublicadas" class="list"></ul>
          </div>
        </div>
      </div>
    </section>

    <section id="ranking" class="section" aria-labelledby="ttlRanking">
      <div class="container">
        <h2 id="ttlRanking">Gamifica√ß√£o ‚Äî ranking de empresas solid√°rias</h2>
        <ol id="listaRanking" class="ranking" aria-label="Ranking por pontos"></ol>
        <p class="muted">Pontos s√£o concedidos por doa√ß√£o conclu√≠da. Os 3 primeiros recebem certificado mensal.</p>
      </div>
    </section>

    <section id="planos" class="section" aria-labelledby="ttlPlanos">
      <div class="container">
        <h2 id="ttlPlanos">Plano para estabelecimentos</h2>
        <div class="grid3 plans">
          <div class="card">
            <h3 class="h4">Gratuito</h3>
            <ul class="mini">
              <li>At√© 10 doa√ß√µes/m√™s</li>
              <li>Chat b√°sico</li>
            </ul>
            <button class="btn secondary" data-plano="free">Come√ßar gr√°tis</button>
          </div>
          <div class="card highlight" aria-label="Plano recomendado">
            <h3 class="h4">Solid√°rio+</h3>
            <ul class="mini">
              <li>Doa√ß√µes ilimitadas</li>
              <li>Selo verificado</li>
              <li>Relat√≥rios de impacto</li>
            </ul>
            <button class="btn primary" data-plano="plus" id="btnAssinar">Assinar</button>
          </div>
          <div class="card">
            <h3 class="h4">Parcerias</h3>
            <ul class="mini">
              <li>Integra√ß√£o com prefeituras</li>
              <li>Patroc√≠nio de marcas</li>
            </ul>
            <button class="btn ghost" data-plano="parceria">Falar com time</button>
          </div>
        </div>
        <div class="card" id="statusPlano" aria-live="polite" aria-atomic="true"></div>
      </div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div class="container grid3">
      <div>
        <strong>Refei√ß√£o Solid√°ria</strong>
        <p class="muted">Reduzindo o desperd√≠cio, alimentando pessoas.</p>
      </div>
      <div>
        <nav aria-label="Rodap√©">
          <a href="#hero">In√≠cio</a>
          <a href="#doar">Doar</a>
          <a href="#buscar">Buscar</a>
          <a href="#planos">Planos</a>
        </nav>
      </div>
      <div>
        <small class="muted">Prot√≥tipo web sem backend. Sugest√£o de stack m√≥vel: Flutter + Firebase + Google Maps.</small>
      </div>
    </div>
  </footer>

  <div class="modal" id="modalCompra" role="dialog" aria-modal="true" aria-labelledby="ttlModal" aria-hidden="true">
    <div class="modal-content">
      <h3 id="ttlModal">Ativar Solid√°rio+</h3>
      <p>Plano mensal simb√≥lico. Confirma a assinatura?</p>
      <div class="modal-actions">
        <button class="btn" id="cancelarCompra">Cancelar</button>
        <button class="btn primary" id="confirmarCompra">Confirmar</button>
      </div>
    </div>
  </div>

  <div id="liveRegion" class="sr-only" aria-live="assertive" aria-atomic="true"></div>

  <script src="script.js" defer></script>
</body>
</html>
```

---

# style.css


---

# script.js

```js
// ===============================
// Prot√≥tipo local sem backend
// ===============================
const $ = (sel, root=document) => root.querySelector(sel);
const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];
const live = msg => { const r = $('#liveRegion'); if (r) { r.textContent = msg; } };

// Estado
const state = {
  estabelecimentos: [
    { id: 'padaria-alegria', nome: 'Padaria Alegria', pontos: 12, endereco: 'Rua das Flores, 120 - Centro, S√£o Paulo', lat: -23.55, lng: -46.63 },
    { id: 'cantina-bom-sabor', nome: 'Cantina Bom Sabor', pontos: 7, endereco: 'Av. Brasil, 800 - Jardim, Rio de Janeiro', lat: -22.91, lng: -43.17 },
    { id: 'super-verde', nome: 'Supermercado Verde', pontos: 21, endereco: 'Rua Atl√¢ntica, 55 - Centro, Recife', lat: -8.05, lng: -34.90 }
  ],
  doacoes: [
    { id: crypto.randomUUID(), estId: 'padaria-alegria', tipo: 'P√£es do dia', qtd: 20, validade: '17:00', janela: '15:00‚Äì17:00', endereco: 'Rua das Flores, 120 - SP', reservadoPor: null, status: 'dispon√≠vel', lat: -23.55, lng: -46.63 },
    { id: crypto.randomUUID(), estId: 'cantina-bom-sabor', tipo: 'Marmitas (veg)', qtd: 12, validade: '20:00', janela: '18:00‚Äì20:00', endereco: 'Av. Brasil, 800 - RJ', reservadoPor: null, status: 'dispon√≠vel', lat: -22.91, lng: -43.17 },
    { id: crypto.randomUUID(), estId: 'super-verde', tipo: 'Frutas variadas', qtd: 30, validade: '16:30', janela: '14:30‚Äì16:30', endereco: 'Rua Atl√¢ntica, 55 - PE', reservadoPor: null, status: 'dispon√≠vel', lat: -8.05, lng: -34.90 }
  ],
  reservas: [],
  publicadas: [],
  conversas: {}, // {doacaoId: [{quem:'you'|'them', texto, ts}]}
  user: { id: 'beneficiario-demo', nome: 'Voc√™' },
  plano: localStorage.getItem('plano') || 'free',
  a11y: JSON.parse(localStorage.getItem('a11y')||'{}')
};

// Utilidades
const byId = id => state.estabelecimentos.find(e => e.id===id);
const formatHora = () => new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
const haversine = (a, b) => {
  const toRad = x => x*Math.PI/180; const R = 6371;
  const dLat = toRad(b.lat - a.lat), dLng = toRad(b.lng - a.lng);
  const lat1 = toRad(a.lat), lat2 = toRad(b.lat);
  const h = Math.sin(dLat/2)**2 + Math.cos(lat1)*Math.cos(lat2)*Math.sin(dLng/2)**2;
  return 2*R*Math.asin(Math.sqrt(h));
};

// Acessibilidade
function applyA11y() {
  const b = document.body; const a = state.a11y;
  b.classList.toggle('hc', !!a.contraste);
  b.classList.toggle('lg', !!a.fonte);
  b.classList.toggle('df', !!a.dislexia);
  if (a.animacoes) b.setAttribute('data-reduced-motion','true'); else b.removeAttribute('data-reduced-motion');
  $('#painelA11y').classList.toggle('open', !!a.open);
  $('#btnA11y').setAttribute('aria-expanded', !!a.open);
}
function saveA11y() { localStorage.setItem('a11y', JSON.stringify(state.a11y)); applyA11y(); }

// Renderiza√ß√µes
function renderStats() {
  $('#countDoacoes').textContent = state.doacoes.length;
  $('#countRefeicoes').textContent = state.doacoes.reduce((a,d)=>a+Number(d.qtd||0),0);
  $('#countEstabelecimentos').textContent = state.estabelecimentos.length;
}

function renderDoacoes(lista = state.doacoes) {
  const ul = $('#listaDoacoes'); ul.innerHTML = '';
  const filtro = $('#filtroTexto').value.toLowerCase();
  const items = lista.filter(d => [d.tipo, d.endereco, byId(d.estId)?.nome].join(' ').toLowerCase().includes(filtro));
  if (!items.length) ul.innerHTML = '<li>Nenhuma doa√ß√£o encontrada.</li>';
  for (const d of items) {
    const est = byId(d.estId);
    const li = document.createElement('li');
    li.innerHTML = `
      <div class="row">
        <strong>${d.tipo}</strong>
        <span class="badge">${d.qtd} un.</span>
      </div>
      <div class="row">
        <span>${est.nome} ¬∑ ${d.endereco}</span>
        <span>Validade: ${d.validade} ¬∑ Retirada: ${d.janela}</span>
      </div>
      <div class="row">
        <button class="btn ${d.status==='dispon√≠vel'?'primary':'ghost'}" ${d.status!=='dispon√≠vel'?'disabled':''} data-reservar="${d.id}">${d.status==='dispon√≠vel'?'Reservar':'Indispon√≠vel'}</button>
        <small class="muted">Selo: empresa solid√°ria</small>
      </div>`;
    ul.appendChild(li);
  }
}

function renderHistorico() {
  const r = $('#listaReservas'); r.innerHTML = '';
  for (const h of state.reservas) {
    const est = byId(h.estId);
    const li = document.createElement('li');
    li.innerHTML = `<div class="row"><strong>${h.tipo}</strong><span class="badge">${h.qtd} un.</span></div>
      <div class="row"><span>${est.nome} ¬∑ ${h.endereco}</span><span>Status: ${h.status}</span></div>`;
    r.appendChild(li);
  }
  const p = $('#listaPublicadas'); p.innerHTML = '';
  for (const h of state.publicadas) {
    const est = byId(h.estId);
    const li = document.createElement('li');
    li.innerHTML = `<div class="row"><strong>${h.tipo}</strong><span class="badge">${h.qtd} un.</span></div>
      <div class="row"><span>${est.nome} ¬∑ ${h.endereco}</span><span>Status: ${h.status}</span></div>`;
    p.appendChild(li);
  }
}

function renderRanking() {
  const ol = $('#listaRanking'); ol.innerHTML = '';
  const rank = [...state.estabelecimentos].sort((a,b)=>b.pontos - a.pontos);
  for (const e of rank) {
    const li = document.createElement('li');
    li.innerHTML = `<span><strong>${e.nome}</strong><br><small class="muted">${e.endereco}</small></span>
                    <span class="badge">${e.pontos} pts</span>`;
    ol.appendChild(li);
  }
}

// Mini mapa simples no canvas
function drawMap(userPos=null) {
  const c = $('#miniMapa'); if (!c) return; const ctx = c.getContext('2d');
  ctx.clearRect(0,0,c.width,c.height);
  // fundo
  ctx.fillStyle = '#0b1220'; ctx.fillRect(0,0,c.width,c.height);
  ctx.strokeStyle = '#233'; ctx.lineWidth = 1; for (let x=0;x<c.width;x+=50){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,c.height); ctx.stroke(); } for (let y=0;y<c.height;y+=50){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(c.width,y); ctx.stroke(); }
  // pontos (fake layout)
  const spots = [ [100,80], [320,160], [220,260] ];
  const colors = ['#22c55e','#22c55e','#22c55e'];
  spots.forEach(([x,y],i)=>{ ctx.beginPath(); ctx.fillStyle = colors[i]; ctx.arc(x,y,8,0,Math.PI*2); ctx.fill(); });
  // usu√°rio
  if (userPos) { ctx.beginPath(); ctx.fillStyle = '#93c5fd'; ctx.arc(420,60,10,0,Math.PI*2); ctx.fill(); }
}

// Chat
function ensureConversation(doacaoId) {
  if (!state.conversas[doacaoId]) state.conversas[doacaoId] = [];
}
function renderConversations() {
  const sel = $('#selConversa');
  const options = Object.keys(state.conversas);
  sel.innerHTML = '';
  if (!options.length) { sel.innerHTML = '<option>Nenhuma conversa</option>'; $('#chatJanela').innerHTML=''; return; }
  for (const id of options) {
    const d = state.doacoes.find(x=>x.id===id) || state.publicadas.find(x=>x.id===id) || state.reservas.find(x=>x.id===id) || {};
    const est = byId(d.estId)||{nome:'Estabelecimento'};
    const opt = document.createElement('option');
    opt.value = id; opt.textContent = `${est.nome} ‚Äî ${d?.tipo||'Conversa'}`;
    sel.appendChild(opt);
  }
  renderChat();
}
function renderChat() {
  const id = $('#selConversa').value; const box = $('#chatJanela'); box.innerHTML = '';
  const msgs = state.conversas[id]||[];
  for (const m of msgs) {
    const div = document.createElement('div');
    div.className = 'msg ' + (m.quem==='you'?'you':'them');
    div.textContent = `[${new Date(m.ts).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}] ${m.texto}`;
    box.appendChild(div);
  }
  box.scrollTop = box.scrollHeight;
}

// Eventos
function onSubmitDoacao(e){
  e.preventDefault();
  const fd = new FormData(e.target);
  const est = state.estabelecimentos[0]; // simulando usu√°rio logado como padaria
  const d = {
    id: crypto.randomUUID(),
    estId: est.id,
    tipo: fd.get('tipo'),
    qtd: Number(fd.get('quantidade')),
    validade: fd.get('validade'),
    janela: fd.get('janela'),
    endereco: fd.get('endereco'),
    reservadoPor: null,
    status: 'dispon√≠vel',
    lat: est.lat, lng: est.lng
  };
  state.doacoes.unshift(d); state.publicadas.unshift(d);
  live('Doa√ß√£o publicada com sucesso');
  $('#statusDoar').textContent = '‚úÖ Doa√ß√£o publicada!';
  e.target.reset();
  renderDoacoes(); renderHistorico(); renderStats();
}

function onClickLista(e){
  const btn = e.target.closest('[data-reservar]'); if (!btn) return;
  const id = btn.getAttribute('data-reservar');
  const d = state.doacoes.find(x=>x.id===id);
  if (!d || d.status!=='dispon√≠vel') return;
  d.status='reservado'; d.reservadoPor = state.user.id; state.reservas.unshift(d);
  // pontos p/ estabelecimento
  const est = byId(d.estId); est.pontos += 3;
  // cria conversa
  ensureConversation(d.id);
  state.conversas[d.id].push({quem:'you', texto:`Ol√°! Reservei "${d.tipo}". Posso retirar dentro da janela ${d.janela}?`, ts: Date.now()});
  // resposta autom√°tica
  setTimeout(()=>{ state.conversas[d.id].push({quem:'them', texto:'Ol√°! Est√° reservado no balc√£o. Traga um documento, por favor.', ts: Date.now()}); renderChat(); }, 500);

  live('Doa√ß√£o reservada');
  renderDoacoes(); renderHistorico(); renderRanking(); renderConversations();
}

function onChatSubmit(e){
  e.preventDefault(); const id = $('#selConversa').value; if (!state.conversas[id]) return;
  const txt = $('#chatMsg').value.trim(); if (!txt) return; $('#chatMsg').value='';
  state.conversas[id].push({quem:'you', texto: txt, ts: Date.now()});
  renderChat();
}

function wireNav(){
  $$('.nav-link').forEach(b=> b.addEventListener('click', ()=>{
    const go = b.getAttribute('data-goto'); if (go) $(go).scrollIntoView({behavior: 'smooth'});
  }));
  $('#btnInicio').addEventListener('click', ()=> $('#hero').scrollIntoView({behavior:'smooth'}));
}

function setupA11y(){
  $('#btnA11y').addEventListener('click', ()=>{ state.a11y.open = !state.a11y.open; saveA11y(); });
  $('#toggleContraste').addEventListener('click', ()=>{ state.a11y.contraste = !state.a11y.contraste; saveA11y(); });
  $('#toggleFonte').addEventListener('click', ()=>{ state.a11y.fonte = !state.a11y.fonte; saveA11y(); });
  $('#toggleDislexia').addEventListener('click', ()=>{ state.a11y.dislexia = !state.a11y.dislexia; saveA11y(); });
  $('#toggleAnimacoes').addEventListener('click', ()=>{ state.a11y.animacoes = !state.a11y.animacoes; saveA11y(); });
  $('#resetA11y').addEventListener('click', ()=>{ state.a11y = {}; saveA11y(); });
  applyA11y();
}

// Localiza√ß√£o (simples)
function localizar(){
  const status = $('#locStatus');
  if (!navigator.geolocation) { status.textContent = 'Geolocaliza√ß√£o n√£o suportada.'; return; }
  status.textContent = 'Obtendo localiza√ß√£o...';
  navigator.geolocation.getCurrentPosition(pos=>{
    status.textContent = 'Localiza√ß√£o obtida.';
    drawMap({lat: pos.coords.latitude, lng: pos.coords.longitude});
    // ordenar por dist√¢ncia (aproxima√ß√£o)
    const you = {lat: pos.coords.latitude, lng: pos.coords.longitude};
    const ordered = [...state.doacoes].sort((a,b)=>haversine(you,a)-haversine(you,b));
    renderDoacoes(ordered);
  }, err=>{ status.textContent = 'N√£o foi poss√≠vel obter a localiza√ß√£o.'; drawMap(null); });
}

// Assinatura (compra)
function openModal(){ $('#modalCompra').classList.add('open'); $('#modalCompra').setAttribute('aria-hidden','false'); }
function closeModal(){ $('#modalCompra').classList.remove('open'); $('#modalCompra').setAttribute('aria-hidden','true'); }
function confirmarCompra(){ state.plano = 'plus'; localStorage.setItem('plano','plus'); $('#statusPlano').textContent = 'üéâ Assinatura ativada! Obrigado por apoiar a causa.'; live('Assinatura confirmada'); closeModal(); }

function wirePlanButtons(){
  $('#btnAssinar').addEventListener('click', openModal);
  $('#btnAssinarHeader').addEventListener('click', openModal);
  $('#confirmarCompra').addEventListener('click', confirmarCompra);
  $('#cancelarCompra').addEventListener('click', closeModal);
}

// Filtro de texto
$('#filtroTexto')?.addEventListener('input', ()=> renderDoacoes());

// Listeners globais
$('#formDoacao')?.addEventListener('submit', onSubmitDoacao);
$('#listaDoacoes')?.addEventListener('click', onClickLista);
$('#formChat')?.addEventListener('submit', onChatSubmit);
$('#selConversa')?.addEventListener('change', renderChat);
$('#btnLocalizar')?.addEventListener('click', localizar);

// Init
function init(){
  wireNav(); setupA11y(); wirePlanButtons(); drawMap(null);
  renderStats(); renderDoacoes(); renderHistorico(); renderRanking(); renderConversations();
}

document.addEventListener('DOMContentLoaded', init);
```

